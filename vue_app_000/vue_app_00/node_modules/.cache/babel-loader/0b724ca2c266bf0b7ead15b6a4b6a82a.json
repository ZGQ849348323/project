{"remainingRequest":"F:\\团队项目\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!F:\\团队项目\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\团队项目\\vue_app_000\\vue_app_00\\src\\components\\xz\\Cart.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\团队项目\\vue_app_000\\vue_app_00\\src\\components\\xz\\Cart.vue","mtime":1564747972771},{"path":"F:\\团队项目\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"F:\\团队项目\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"F:\\团队项目\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      list: [],\n      sub: \"\"\n    };\n  },\n  methods: {\n    loadMore: function loadMore() {\n      var _this = this;\n\n      // 功能：加载购物车中数据\n      // 当组件创建成功后调用\n      // 1：发送请求 cart\n      var url = \"cart\";\n      this.axios.get(url).then(function (res) {\n        // console.log(res)\n        // 2：获取返回结果\n        if (res.data.code == -1) {\n          // 3：如果用户没有执行登录的操作\n          _this.$messagebox(\"消息\", \"请登录\").then(function (res) {\n            // 提示交互提交/跳转登录组件\n            _this.$router.push(\"/Login\");\n\n            return;\n          });\n        } else {\n          // 4：获取数据成功\n          var list = res.data.data;\n          console.log(list); // 5：保存购物车数据\n\n          _this.list = list;\n        }\n      });\n    },\n    delItem: function delItem(e) {\n      var _this2 = this;\n\n      //功能：删除购物车中指定商品\n      //获取购物车的id\n      var id = e.target.dataset.id;\n      var url = \"del\";\n      var lname = e.target.dataset.lname; // 发送ajax服务器端程序 ？id=id\n\n      var obj = {\n        id: id // 交互提示用户是否删除指定商品\n\n      };\n      this.$messagebox.confirm(\"\\u662F\\u5426\\u786E\\u5B9A\\u5220\\u9664\\\"\".concat(lname, \"\\\"\\u8BE5\\u5546\\u54C1\")).then(function (res) {\n        // 同意\n        _this2.axios.get(url, {\n          params: obj\n        }).then(function (res) {\n          if (res.data.code == 1) {\n            _this2.$toast(\"删除成功\"); // 重新调用loadMore()最新购物列表查询\n\n\n            _this2.loadMore();\n          }\n        }); // 返回服务器返回内容\n\n      }).catch(function () {});\n    }\n  },\n  created: function created() {\n    this.loadMore();\n  }\n};",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,YAAA,EADA;AAEA,WAAA;AAFA,KAAA;AAIA,GANA;AAOA,WAAA;AACA,YADA,sBACA;AAAA;;AACA;AACA;AACA;AACA,UAAA,MAAA,MAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,CAAA,EAAA;AACA;AACA,gBAAA,WAAA,CAAA,IAAA,EAAA,KAAA,EAAA,IAAA,CAAA,eAAA;AACA;AACA,kBAAA,OAAA,CAAA,IAAA,CAAA,QAAA;;AACA;AACA,WAJA;AAKA,SAPA,MAOA;AACA;AACA,cAAA,OAAA,IAAA,IAAA,CAAA,IAAA;AACA,kBAAA,GAAA,CAAA,IAAA,EAHA,CAIA;;AACA,gBAAA,IAAA,GAAA,IAAA;AACA;AACA,OAjBA;AAkBA,KAxBA;AAyBA,WAzBA,mBAyBA,CAzBA,EAyBA;AAAA;;AACA;AACA;AACA,UAAA,KAAA,EAAA,MAAA,CAAA,OAAA,CAAA,EAAA;AACA,UAAA,MAAA,KAAA;AACA,UAAA,QAAA,EAAA,MAAA,CAAA,OAAA,CAAA,KAAA,CALA,CAMA;;AACA,UAAA,MAAA;AAAA,YAAA,EAAA,CACA;;AADA,OAAA;AAEA,WAAA,WAAA,CAAA,OAAA,iDAAA,KAAA,2BAAA,IAAA,CAAA,eAAA;AACA;AACA,eAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA;AAAA,kBAAA;AAAA,SAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,mBAAA,MAAA,CAAA,MAAA,EADA,CAEA;;;AACA,mBAAA,QAAA;AACA;AACA,SANA,EAFA,CASA;;AACA,OAVA,EAUA,KAVA,CAUA,YAAA,CACA,CAXA;AAgBA;AAlDA,GAPA;AA2DA,SA3DA,qBA2DA;AACA,SAAA,QAAA;AACA;AA7DA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"cart\" >\r\n\t\t<!-- Cart.vue 购物车组件 -->\r\n\t\t<!-- <h1>Cart.vue</h1> -->\r\n\t\t<!-- 1：顶部按钮：权限 -->\r\n\t\t<div class=\"selectAll\">\r\n\t\t\t全选<input type=\"checkbox\" />\r\n\t\t</div>\r\n\t\t<!-- 2：购物车商品信息 -->\r\n\t\t<div class=\"cart-item\" v-for=\"(item,i) of list\" :key=\"i\">\r\n\t\t\t<div class=\"lefImgText\">\r\n\t\t\t\t<input type=\"checkbox\">\r\n\t\t\t\t<img :src=\"'http://127.0.0.1:3000/'+item.img_url\" />\r\n\t\t\t\t<div class=\"lname\">{{item.lname}}</div>\r\n\t\t\t\t<div class=\"price\">{{item.price}}</div>\r\n\t\t\t</div>\r\n\t\t\t<mt-button @click=\"delItem\" :data-id=\"item.id\" :data-lname=\"item.lname\">删除</mt-button>\r\n\t\t</div>\r\n\t\t<!-- 3：按钮 删除选中商品 -->\r\n\t\t<!-- 合计 -->\r\n\t\t<div>\r\n\t\t\t<mt-button>删除选中的商品</mt-button>\r\n\t\t\t小计:<span>{{sub}}</span>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tlist:[],\r\n\t\t\tsub:\"\",\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tloadMore(){\r\n\t\t\t// 功能：加载购物车中数据\r\n\t\t\t// 当组件创建成功后调用\r\n\t\t\t// 1：发送请求 cart\r\n\t\t\tvar url=\"cart\";\r\n\t\t\tthis.axios.get(url).then((res)=>{\r\n\t\t\t\t// console.log(res)\r\n\t\t\t\t// 2：获取返回结果\r\n\t\t\t\tif(res.data.code==-1){\r\n\t\t\t\t\t// 3：如果用户没有执行登录的操作\r\n\t\t\t\t\tthis.$messagebox(\"消息\",\"请登录\").then(res=>{\r\n\t\t\t\t\t\t// 提示交互提交/跳转登录组件\r\n\t\t\t\t\t\tthis.$router.push(\"/Login\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// 4：获取数据成功\r\n\t\t\t\t\tvar list = res.data.data;\r\n\t\t\t\t\tconsole.log(list)\r\n\t\t\t\t\t// 5：保存购物车数据\r\n\t\t\t\t\tthis.list=list;\r\n\t\t\t\t}\r\n\t\t\t})\t\t\t\r\n\t\t},\r\n\t\tdelItem(e){\r\n\t\t\t//功能：删除购物车中指定商品\r\n\t\t\t//获取购物车的id\r\n\t\t\tvar id=e.target.dataset.id;\r\n\t\t\tvar url=\"del\"\r\n\t\t\tvar lname=e.target.dataset.lname;\r\n\t\t\t\t\t// 发送ajax服务器端程序 ？id=id\r\n\t\t\tvar obj={id:id}\r\n\t\t\t// 交互提示用户是否删除指定商品\r\n\t\t\t\tthis.$messagebox.confirm(`是否确定删除\"${lname}\"该商品`).then(res=>{\r\n\t\t\t\t\t// 同意\r\n\t\t\t\t\t\tthis.axios.get(url,{params:obj}).then((res)=>{\r\n\t\t\t\t\t\t\tif(res.data.code==1){\r\n\t\t\t\t\t\t\tthis.$toast(\"删除成功\");\r\n\t\t\t\t\t// 重新调用loadMore()最新购物列表查询\r\n\t\t\t\t\t\t\tthis.loadMore();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t// 返回服务器返回内容\r\n\t\t\t\t}).catch(() => {\r\n                });\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.loadMore();\r\n\t},\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n\t/* 1：商品项目元素 */\r\n\t.cart-item{\r\n\t\tdisplay:flex;\t/* 商品项目设置弹性布局 */\r\n\t\tjustify-content: space-between;\t/* 子元素两端对齐 */\r\n\t\talign-items: center;\t/* 垂直居中 */\r\n\t\tborder-bottom: 1px solid #ccc;\t/* 底部边框 */\r\n\t}\r\n\t/* 2：左侧图片与文字 */\r\n\t.lefImgText{\r\n\t\tdisplay: flex; /* 子元素水平对齐 */\r\n\t\talign-items: center; /* 垂直居中 */\r\n\t}\r\n\t/* 3：单独修改图片宽度和高度 */\r\n\t.lefImgText img{\r\n\t\twidth: 50px;\r\n\t\theight: 50px;\r\n\t}\r\n\t/* 4：商品价格 */\r\n\t.price{\r\n\t\tmargin-left: 25px;\r\n\t\tcolor: red;\r\n\t}\r\n</style>\r\n"],"sourceRoot":"src\\components\\xz"}]}